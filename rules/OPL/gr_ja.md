[日本語](./gr_ja.md) | [English](./gr_en.md)
# 一般規定（General Rules & Regulations）

RoboCup Japan Open @Home 2023（`RCJ2023`）のOpen Platform League（`OPL`）における競技は，このページに記載した一般規定に従って開催されます．
この一般規定については，[RoboCup 2023 Rulebook (March 28, 2023)](https://robocupathome.github.io/RuleBook/rulebook/master.pdf) のChapter 3 `General Rules & Regulations` をもとに作成しています．
[RoboCup 2023 Rulebook](https://robocupathome.github.io/RuleBook/rulebook/master.pdf)からの変更で，このページに記載していない事項については，考慮しないものとします．そのため，GitHubのIssuesより，参加チームとの議論の上，ルールを確定していきます．


## チーム登録と参加資格（Team Registration and Qualification）

チーム登録（Team Registration）は日本ロボカップ委員会を通して行われます．`RCJ2023`では，チーム登録に2つの段階があります．

1. 事前登録
1. ~~チーム選考~~
1. 最終登録

事前登録や最終登録についての情報は，RoboCup@Home JPのメーリングリストやSlack上で発表される予定です．この際，チーム選考（Qualification）は行いません．参加登録を済んだ全チームが参加できます．

### 事前登録（Pre-registration）

`RCJ2023`における事前登録は下記のリンクからお願いします．チーム登録締め切りは`3月31日（金）午後1時`となっております．多数のご登録お待ちしております．

> **Note**
> 事前登録フォーム：https://forms.gle/wzCGnJwkGiw2KUfg8

なお，実施されるリーグは以下のようになります．また，事前登録フォームへの記入の際は，複数のリーグへの参加をご検討されるチームはそれぞれのリーグに対して，リーグごとの参加登録を記入してください．よろしくお願いいたします．

- Open Platform League（OPL）
- Domestic Standard Platform League（DSPL）
- Education League
- Simulation Open Platform League（S-OPL）

> **Note**
> すべてのリーグは現地参加のみとなりますので，ご注意ください．

### 最終登録（Final Registration）

`RCJ2023`における最終登録は，以下のウェブサイトにある「参加登録」（Google Form）を利用して行います．
詳細は公式ウェブサイトの「[申し込み方法](https://www.robocup.or.jp/japanopen2023/registration.html)」の説明をご覧ください．
この際，チームコードは，仮登録時に発行されたものをご利用ください．

> **Note**
> 最終登録 - 参加登録フォーム：https://docs.google.com/forms/d/e/1FAIpQLSeYN8dRqkmi4Q_4idUBG4yEoLghzEcGQVQHaSru67Fn1A4CtQ/viewform


## 運営（Organization）

### 実行委員会（Executive Committee - EC）

実行委員会（EC）は，リーグ戦のルールに関する責任者であり，大会の進行を行います．実行委員会（EC）は，前大会の優勝チームから1名，準優勝チームから1名選出されます．主な役割は，大会進行やルールブックの作成とレフェリングです．RoboCup Japan Open @HomeではECのメンバーが，必ずTCのメンバーの役割も果たします．

### 技術委員会（Technical Committee - TC）

技術委員会（TC）は，大会の進行をサポートします．技術委員会（TC）は各チームから任意で選出されます．主な役割は，各競技のレフェリーや採点作業です．

### 組織委員会（Organizing Committee - OC）

組織委員会（OC）は，大会を運営します．主な役割は，スケジュールやルールを作成し，各競技のシナリオに関する情報をアナウンスすることです．
一方で，現地組織委員会（LOC）は，競技会場の設営・運営を担当します．


## 観客との交流（Audience interaction）

RoboCup@Homeの魅力の1つは，ロボットが何をすべきか，タスクの中で実際に何を行っているかを観客に見せることでもあります．特に，ロボットが何をしているかという情報を観客に伝えることは，リーグの発展にとっても重要となります．そのため，YouTubeなどの動画配信サービスを用いて，競技の様子を配信することがあります．また，運営として観客がロボットの動作に邪魔しないように，できる限り注意を払います．ただし，アリーナ内で実施されているタスクが範囲外の観客の動きによって，認識ができなくなる（例：骨格検出の不具合等）恐れがあるため，その対処方法を各チームに考慮しておく必要があります．


## シナリオ（Scenario）

ほとんどの競技タスクは，RoboCup@Homeのアリーナ内で行われますが，一部のテストは事前に知らされていない公共の場所のような屋外で行われることもあります．ここでは，アリーナとその内容，特にテストとリーグで共通する道具や家具等について説明します．

### アリーナ（Arena）

`RCJ2023`におけるアリーナ情報については，`WRS2020`に基づいて環境設定を行います．
<!-- RoboCup@Homeでは，それぞれの場所には，場所クラスが設定されています． -->

ただし，ロボットは現実の世界で機能する必要があるため，アリーナは固定されておらず，予告なく変更される場合があります．

1. **メジャーチェンジ**：日常的な環境では完全に固定されない家具は，競技の間に少し移動されることがあります．家具の配置を変えたり，部屋の中を大きく移動したりすることはありませんが，ソファやテーブルが少し回転したり移動したりする可能性があります．`RCJ2023`では，そのような家具の位置を固定しません．また，壁は固定され，部屋の構造は変わりませんが，通路は塞がれる可能性があります．

1. **マイナーチェンジ**：椅子が多少動いたり，ドアが完全に閉まっていなかったりすることは競技中であっても常に起こることがあります．

### 物体（Objects）

RoboCup@Homeでは，物体の認識と操作を伴うタスクがあります．このようなタスクでRCAP2021に基づいて使用する9個の物体のリストを用意しています．物体リストは下記のリンクから確認できます．リストには，各物体の写真，正式名称，物体カテゴリ（例えば，`Noodle`は`Food`のカテゴリに属す）が記載されます．ほとんどのオブジェクトは軽量で，ロボットが簡単に掴める物になっています．各物体のカテゴリーごとに，設置されている場所や，片づけるべき場所が決まっています．このカテゴリを参照することで，競技中にそのカテゴリの物体を見つけたり，片づけたりしていきます．物体を加工することは禁止としますので，ご注意ください．

また，競技タスクでは，物体を「`既知物体`（事前公開＋直前公開）」と「`未知物体`」として分けて使用していきます．このとき，`既知物体`とは，競技のルールの公開とともに事前公開している物体と，競技の`Setup Day`に公開する直前公開の物体という2つの種類に分けます．競技本番は，各チームが持ち寄せた物体を使用します．また，`未知物体`とは，物体リストにない物体で，把持・操作可能なものを指しています．競技タスクによっては，この未知物体を使用することがあります．

> **Note**
> 事前公開物体リスト（RCAP2021で使用した物体）：https://github.com/RoboCupAtHomeJP/AtHome2021/blob/master/Data/opl_known_object_list.pdf

### 事前に定義された人の名前（Predefined Person Names）

RoboCup@Homeでは，人の名前を使用したタスクがあります．アリーナにいるすべての人には，事前に定義された名前が割り当てられています．

### 無線ネットワーク（Wireless network）

`RCJ2023`では，無線通信のネットワーク環境が提供されません．そのため，会場でチーム独自のWiFiアクセスポイントの使用を許可します．

> **Warning**
> ロボットの不自然な動き（遠隔操作等による動作）を発覚した場合，減点，失格，あるいは大会全体の失格といったペナルティが課されることがあります．


## ロボット（Robots）

`RCJ2023`で使用するロボットは，下記の項目を満たしている必要があります．
これらを満たしているかどうかの確認は，[Robot Inspection](./ri_ja.md)で行います．

### ロボット台数（Number of Robots）

1. **ロボットの登録台数**：1チームあたりのロボット台数は最大2台までとなっています．ただし，[Robot Inspection](./ri_ja.md)をクリアしたロボットのみを競技で使用することが可能です．

1. **競技タスク時の台数**：1回の競技テストで使用できるロボットは1台のみです．異なる競技テストでは，異なるロボットを使用することが可能です．

1. **Technical Challengeでの台数**：Technical Challengeでは，登録した最大2台のロボットを同時に使用することが可能です．

### ロボットの仕様（Robot Specification）
RoboCup@Home Open Platform Leagueに参加するロボットは，動作中に危害を加えないよう，下記の仕様に準拠する必要があります．

#### **サイズと重量（Size and Weight）**

1. **寸法**：ロボットの寸法は，一般的なドア（多くの国では200cm×70cmとなっている）の制限を超えないようにしなければなりません．運営の方で，より大きなロボットの参加資格と登録を認めることがありますが，そのロボットが実際にアリーナに入れることを保証するものではありません．確認が必要な場合は，運営にお問い合わせください．

1. **重量**：ロボットの重量と床にかかる圧力は，大会が開催される国のオフィスや居住用の建物の建築に関する規制を超えないようにする必要があります．

1. **運搬**：チームは，ロボットをアリーナから素早く移動させられるようにする必要があります．もし，ロボットが自律的に移動できない場合，いかなる理由であれ，チームはロボットを迅速かつ容易に移動させられなくてはなりません．

#### **外観と安全性（Appearance and Safety）**

1. **カバー**：ロボット内部のハードウェア（電子機器やケーブル）は，カバーで覆い，安全性を確保してください．

1. **ケーブル**：ロボットから垂れ下がるようなケーブルは禁止としています．必ず，ロボットの内部で収まるようにしてください．

1. **安全性**：ロボットに鋭利な刃物や人に危害を加えるような要素を入れてはいけません．

1. **迷惑行為**：大きな音を出し続けたり，眩しい光で照らしたりしてはいけません．

1. **ナビゲーション**：ロボットによる安全な自律走行を行うため，障害物を回避できるナビゲーション技術が必須となります．

<!-- 「マーク：人工的なマークやパターンをつけてはいけません．」についてはどうするべきか？ -->
<!-- ロゴとかをつけているチームやハンドにQRマーカをつけているチームがある． -->

#### **非常停止ボタン（Emergency Stop Button）**

1. **アクセス性と視認性**：全てのロボットは，非常停止ボタンを，目に見える位置かつ簡単に押せる位置に設置する必要があります．

1. **色**：緊急停止ボタンは赤色であり，ロボット上で唯一の赤色ボタンでなければいけません．もし，他に赤色のボタンがあった場合は，運営がロボット上にある他の赤色ボタンをテープで覆うか，取り除くようチームに要求することがあります．

1. **ロボットの動作**：非常停止ボタンが押された場合，ロボットとその部品は直ちに動きを停止しなければなりません．

<!-- スタートボタンについては要検討 -->

<!-- 外部機器については要検討 -->
<!-- ## 5 外部機器
チームが競技中に使用するロボットの一部でないものは全て「外部機器」とみなされます．全ての外部機器は，[Robot Inspection](https://github.com/RoboCupAtHomeJP/Rule2023/blob/rules/opl/robot_inspection.md)において，運営の認可を受けなければいけません．この際，運営は外部機器を自由に使用できるか，審判の監視下で使用できるかを指定し，採点に与える影響を判断します．なお，イヤホンやヘッドホンなどの無線機器の使用は，外部機器としても使用が認められません．また，大会主催者は，アリーナ内のネットワークやインターネット接続の可用性や信頼性に関して，いかなる保証や責任も負わないことに注意してください．チームは自己の責任において外部機器を使用することができます．
-->


## 競技構成（Organization of the Competition）

`RCJ2023`の競技は，[AtHome2023](https://github.com/RoboCupAtHomeJP/AtHome2023)で公開されたタスクを数日間に分けて行っていきます．

### 採点方法（Scoring System）

`RCJ2023`では，ロボットによる`競技タスク`と`Technical Challenge`という研究発表の2つの競技があります．採点は，2つの競技ごとに別々で行われ，別々に表彰されます．どちらとも参加していただいても，片方だけ参加して頂いても構いません．参加競技を事前に運営の方にその旨を伝えてください．

#### **競技タスク**

`RCJ2023`では，全チームが全競技タスクへの挑戦権を有しています．こちらは，別途アナウンスしたルール，配点，及びスケジュールに従って実施されます．ここでは，`Technical Challenge`を除く各競技タスクにおける最高得点の合計点で競い合います．このとき，`Robot Inspection`を除く各競技タスクの最高得点は500点となっています．採点方式は下記のようになっています．

自チームメンバー1名と他チームメンバー1名の2名による採点を行います．その順番は時計回りで決まり，次の例のようで採点を行います．

- タスク1回目
  - `チームA`の採点：`チームA`から1名，`チームB`から1名（計2名で実施）
  - `チームB`の採点：`チームB`から1名，`チームC`から1名（計2名で実施）
  - `チームC`の採点：`チームC`から1名，`チームA`から1名（計2名で実施）
- タスク2回目
  - `チームA`の採点：`チームA`から1名，`チームC`から1名（計2名で実施）
  - `チームB`の採点：`チームB`から1名，`チームA`から1名（計2名で実施）
  - `チームC`の採点：`チームC`から1名，`チームB`から1名（計2名で実施）

> **Note**
> `RCJ2023`のOPLでは，Educationリーグとの繋がりを強くする方針で動いています．教育を目的としたEducationリーグにて培った技術力を，ぜひOPLで発揮していってもらいたいです．そのため，OPLでは，Educationリーグで行われている`Carry My Luggage`という競技を採用し，この競技ルールはEducationリーグと同じです．

#### **Technical Challenge**

`RCJ2023`では，全チームが`Technical Challenge`への挑戦権を有しています．こちらは，別途アナウンスしたルール，配点，及びスケジュールに従って実施されます．独自の技術をアピールする機会となっており，そのプレゼンテーションやデモンストレーションを通して，審査員によって採点されます．

### スケジュール（Schedule）

詳細な実施される競技のスケジュールについては，決まり次第，追記していきます．


## 競技時の注意（Procedure during Tests）

`RCJ2023`の競技は，下記の項目に気を付けて，決まった手順通りに競技を実施していきます．

### 安全第一（Safety First!）

1. **緊急停止**：競技の内外でロボットを操作する際，人や物に対して危険な動作をする可能性がある場合，チームはいつでもロボットを直ちに停止させなければいけません．

1. **要請での停止**：審判員，技術委員会，組織委員会，連盟役員，評議員からロボットの停止を指示された場合，議論の余地はなく，直ちにロボットを停止させなければいけません．

1. **ペナルティ**：チームがこれらに従わない場合，チームとそのメンバーはRoboCup@Homeの運営の決定次第，進行中の競技から即座に除外されます．さらに，そのチームとメンバーは，RoboCup連盟評議員会の決定により，1年以上の期間，今後の大会への出場を禁じられる場合があります．

### チームメンバーの最大人数について（Maximum number of team members）

1. **競技時**：競技中，アリーナ内に入れるチームメンバーの最大人数は1名です．ただし，ボランティアの協力が必要な場合は例外とします．

1. **セットアップ**：競技のセットアップ中は，アリーナ内のチームメンバーの人数に制限はありません．

1. **Technical Challenge**：`Technical Challenge`では，アリーナ内に入れる人数に制限はありません．

### フェアプレイ（Fair Play）

大会期間中，全てのチームにフェアプレーと協力的な行動が求められています．特に，下記の時は注意してください．
- 他チームを評価するとき
- 審判をしているとき
- 他チームのロボットと交流するとき

ここでいうフェアプレイとは，下記のことを指しています．
- 不正をしようとしない（例：何もないところで自律的な行動を装う）
- ルールを悪用しない（例：課題を解決しようとせず，得点を狙う）
- 他のロボットをわざと失敗させようとしないこと
- 標準的なプラットフォームのロボットを改造しないこと

> **Warning**
> このルールを無視した場合，減点，失格，あるいは大会全体の失格といったペナルティが課されることがあります．

### 期待されるロボットの行動（Expected Robot’s Behavior）

特に断らない限り，ロボットは礼儀正しく親切な人間がするのと同じように振る舞い，反応することが期待されています．これは，ロボットが与えられた課題をどのように解決する際にも当てはまります．ロボットの専門家でない一般的なユーザに伝わるような行動や振る舞いを心がけましょう．このとき，一般的なユーザは，ロボットを操作する具体的な手順を知らないことを考慮してください．具体的には，ロボットが行う動作を発言されることが重要となります．

### ロボットの自律性と遠隔操作（Robot Autonomy and Remote Control）

1. **接触禁止**：競技中，参加者は，タスクで必要とされる場合を除き，ロボットと接触することはできません．

1. **自然なインタラクション**：ロボットとのインタラクションは，ジェスチャーと会話のみとしています．

1. **操作禁止**：直接操作に類するものは禁止とします．

1. **遠隔操作**：ロボットを遠隔操作することを禁止とします．また，ボタンを押したり，故意にセンサーに影響を与えるようなことも禁止しています．

> **Warning**
> このルールを無視した場合，減点，失格，あるいは大会全体の失格といったペナルティが課されることがあります．

### 接触や衝突（Collisions）

1. **接触**：操作対象以外の物体に少しだけ触れてしまうことはある程度許容されますが，推奨はされません．ただ，ロボットが何かに衝突することは許されません．このとき，「[安全第一](#安全第一safety-first)」のルールが，他のいかなるルールよりも優先されます．

1. **衝突**：競技中に，ロボットが何かに衝突した場合，そのロボットは直ちに停止されます．衝突によって，追加のペナルティが適用される場合もあります．

1. **機能的な接触**：ロボットが物体を掴むために圧力をかけたり，競技によっては家具を押し退けたり，マニピュレータ以外の構造部分を用いて環境と相互作用することは認められています．しかし，ロボットは衝突でないインタラクションであることを明確に告げる必要があります．

1. **ロボット同士の回避**：2台のロボットが遭遇するような競技の場合，両者は積極的に相手のロボットを避けようとしなければなりません．合理的な時間（例えば30秒）以内に，別のルートを目指さないロボットは排除される可能性があります．

> **Warning**
> 審判が危険な動作が疑われる場合，即座にロボットを停止させることがあります．

### ロボットの撤去（Removal of robots）

上記のルールに従わないロボットは停止し，アリーナから撤去されます．

1. ロボットを撤去するかどうか，またいつ撤去するかは，審判員および競技を監視している技術委員（TC）メンバーの判断によって決められます．

1. 審判員や技術委員（TC）メンバーから指示があった場合，チームは直ちにロボットを停止し，進行中の競技の妨げにならないようにアリーナから撤去しなければなりません．

### スタート指示（Start signal）

デフォルトのスタート指示は，特に断りのない限り，`ドアオープン`（扉を開くとき）となります．他のスタート指示を使用することも可能ですが，ロボット検査において技術委員（TC）が許可したものでなければなりません．

### アリーナへの入場と退場（Entering and leaving the Arena）

1. **スタート位置**：特に明記されていない限り，ロボットはアリーナの外からスタート位置とします．

1. **入場**：ロボットは，`ドアオープン`後に，自律的にアリーナに入場しなければなりません．

> **Note**
> ロボットが`ドアオープン`によって入場した後，使用した扉を閉めることができます．このとき，ロボットが通路を塞いでいない場合，入場したとみなされます．

### オペレータ（Operators）

`RCJ2023`では，基本的にロボットのオペレータを，自チームから出して良いものとしています．ただし，オペレータ以外に登場する人については，運営で選出した者によって競技が行われることもあります．

### 時間制限（Time limits）

`RCJ2023`では，各競技タスクで設定された制限時間にて運用していきます．競技の達成時間による加点なども特にありません．

### リスタート（Restart）

`RCJ2023`では，制限時間内であれば，何回でもリスタートを行うことを可能としています．ただし，リスタート直後の競技の点数は半分となります．その後のタスクの点数は変わりません．

また，リスタート時に，ロボットが物体を持っている場合は，物体を持たせたままにするか，取り上げるかは自チームの判断により選択できます．ただし，取り上げた物体は，その後アリーナの外で保管します．そのため，取り上げた物体に関しては，その競技が終了するまで改めて使用することを不可とします．

### 音声対話での聞き返（Verification in Voice Recognition）


`RCJ2023`では，全競技タスク共通して，音声対話での聞き返す回数による減点を行いません．ただし，競技時間による制限はありますので，「[デウス・エクス・マキナ](#デウス・エクス・マキナdeus-ex-machina)」等を駆使して，なるべくロボットを動作させ，得点の獲得を推奨します．

### 物体の配置（Placement of the objects）

`RCJ2023`では，競技で使用する物体を自チームで設置して良いものとしています．ただし，運営側から指定された設置する物体の順番や使用する物体通り競技が行われます．


## デウス・エクス・マキナ（Deus ex Machina）

ロボットは，タスクの主目的を達成しない限り，点数を得ることができません．しかし，多少の不具合によってロボットがタスクを達成できなくなるといったことがよく起こってしまいます．このような事態を防ぐために，ロボットは競技中，人に助けを求めることができるようになっています．

音声認識が入らずにタスクがスタートしない，物体が掴めずにタスクが続行しないなど，チーム，観客の双方にとって望ましくない状況を起こさないために，それらの部分的なタスクを回避する手段を積極的に活用することを推奨します．

### 手順（Usage）

タスクの解決中に人の支援を要請する手順は下記の通りになります．

1. **支援のお願い**：ロボットは，人の助けが必要であることをはっきりと示さなければいけません．特に，下記の項目には気を付けてください．
    - 支援の内容
    - 特定の目標または望ましい結果
    - どのような動作をしなければならないか（必要な場合）
    - ロボットとの対話方法の詳細（必要な場合）

1. **支援後の対応**：ロボットに指示された行動を行った後，人は要求された行動が完了したことをロボットに伝えなければいけません．

1. **感謝**：ロボットは支援してくれた人に対して，丁寧にお礼を言わなければなりません．

### 例（Example）

`デウス・エクス・マキナ`は，各競技タスクごとに，様々なものが用意されています．詳細については，それらの競技内容を確認してください．また，追加してほしい`デウス・エクス・マキナ`があれば，GitHubのIssueにて教えてください．運営の方で検討後，積極的に採用していきたいと思います．

`RCJ2023`では，特に下記のようなデウス・エクス・マキナを強く推奨しています．

- QRコードの積極活用による音声認識代替手段の確実な確保
- ロボットに搭載されたタッチディスプレイなどによるインタラクション方法の活用
- ロボットの音声やディスプレイ表示を用いたレフェリーへの指示

「ドアを開けてください」，「椅子をどかしてください」，「モノを取ってハンドの中に入れてください」など，ロボットが分かりやすく指示したことについては，レフェリーは最大限対応します．ただし，音声が小さく聞き取れない，母国語では無い英語または日本語の指示が聞き取れない，画像が小さくて読めないなど，レフェリーの限界を超える点については対応できません．

> **Warning**
> ロボットへ直接コマンドを送信することなどは，`デウス・エクス・マキナ`においても禁止されています．あくまで，ロボットとのインタラクションを簡易化するものになっています．

### スコア（Scoring System）

ロボットが，人に支援を要求するような`デウス・エクス・マキナ`を使用できる回数に制限はありません．しかし，`デウス・エクス・マキナ`を使用した際のタスクの得点は，減点または失点することがあります．詳細については，各競技タスクのルールを確認してください．


## 不参加時のペナルティ（Penalty for not attending）

競技中のペナルティ以外にも，無断で欠席した場合においてもペナルティが課せられます．
競技開始までの流れについては，下記の項目を確認してください．

1. **スケジュールの公開**：全チームが全ての競技タスクに参加することになります．ただし，参加登録時に参加しない競技を運営に伝えた場合は，スケジュールから除かれます．

1. **アナウンス**：各競技開始前に運営によるアナウンスがあります．もし，チームが参加できなくなった場合（理由の如何を問わず），チームリーダーはアナウンス開始の60分前までに運営にその旨を伝えなければなりません．

1. **ペナルティ**：予定された競技タスクが始まるときに，スタート位置にいないチームは，そのテストに参加することができません．チームが参加できないことを運営に伝えていない場合，各競技共通して500点のペナルティが課されます．
